<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Users - DECODE OpenCloud Docs</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">DECODE OpenCloud Docs</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Architecture</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../architecture/repositories/" class="dropdown-item">Repositories</a>
</li>
                                    
<li>
    <a href="../../architecture/workflow/" class="dropdown-item">Job workflow</a>
</li>
                                    
<li>
    <a href="../../architecture/design/" class="dropdown-item">Design choices</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Developer guide</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../applications/" class="dropdown-item">Applications</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Users</a>
</li>
                                    
<li>
    <a href="../developing/" class="dropdown-item">Developing</a>
</li>
                                    
<li>
    <a href="../testing/" class="dropdown-item">Testing</a>
</li>
                                    
<li>
    <a href="../debugging/" class="dropdown-item">Debugging</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../applications/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../developing/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#users" class="nav-link">Users</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#users-handling" class="nav-link">Users handling</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#registration-workflow" class="nav-link">Registration workflow</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="users">Users</h1>
<hr />
<h2 id="users-handling">Users handling</h2>
<p>Users and workers are both stored in an AWS Cognito user pool.
This pool contains different groups:</p>
<ul>
<li>A "users" group, of which confirmed users of DECODE OpenCloud are members.
  Membership in this group is checked when <a href="https://github.com/ries-lab/DECODE_Cloud_UserAPI/blob/main/api/dependencies.py">authenticating in the user-facing API</a>.</li>
<li>A "workers" group, of which confirmed workers of DECODE OpenCloud are members.
  Membership in this group is checked when <a href="https://github.com/ries-lab/DECODE_Cloud_WorkerAPI/blob/main/workerfacing_api/dependencies.py">authenticating in the worker-facing API</a>.</li>
<li>A "cloud" group, of which cloud workers of DECODE OpenCloud are members.
  In particular, the <a href="https://github.com/ries-lab/DECODE_AWS_Infrastructure/blob/main/stack/apis/runtime/cognito_worker_user_trigger/lambda_script.py">user used by the AWS Batch workers</a> is a member of this group.</li>
</ul>
<hr />
<h2 id="registration-workflow">Registration workflow</h2>
<h5 id="user-view">User view</h5>
<p>Potential users and workers can register using the "Registration" page of the <a href="https://github.com/ries-lab/DECODE_Cloud_UserFrontend">user frontend</a>.
They provide their email address, password, and possibly add some details about the registration request (e.g., who they are, why they would like to have access, if they are registering a worker).
They then need to verify the provided email address by using a verification code.
After successful registration, users are in a state of pending confirmation:
At login in the <a href="https://github.com/ries-lab/DECODE_Cloud_UserFrontend">user frontend</a>, they will be informed that their account still has to be confirmed by the administrators.
Once the account is confirmed, they are able to use the <a href="https://github.com/ries-lab/DECODE_Cloud_UserFrontend">frontend</a> and APIs.</p>
<h5 id="administrators-view">Administrators view</h5>
<p>Confirmation of new users and workers is controlled by requiring their membership in the "users" and "workers" groups in the AWS Cognito user pool.
As long as this is not the case, their access to the APIs is blocked.
When a new user registers using the <a href="https://github.com/ries-lab/DECODE_Cloud_UserFrontend">user frontend</a>, an email is sent to the administrator email using a <a href="https://github.com/ries-lab/DECODE_AWS_Infrastructure/tree/main/stack/apis/runtime/cognito_post_creation_trigger">Cognito post-creation trigger</a>.
The administrator can see the request details on the AWS CLI and accept the request by adding the Cognito users to the appropriate groups.</p>
<hr /></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
